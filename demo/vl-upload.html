<!DOCTYPE html>
<html>
  <head>
    <title>vl-upload voorbeeld</title>
    <script type="module" src="/src/vl-upload.src.js"></script>
    <script type="module" src="/node_modules/vl-ui-button/vl-button.js"></script>
    <script type="module" src="demo.js"></script>

    <link rel="stylesheet" type="text/css" href="/node_modules/vl-ui-button/style.css"/>
  </head>

  <body>
    <h1>vl-ui-upload demo</h1>
    <p>
      Om de bestanden effectief op te laden, moet je <strong>vl.upload.dropzoneInstances[i].processQueue()</strong>
      oproepen. Elke methode van <a href="https://www.dropzonejs.com/#dropzone-methods"
                                    target="_blank">Dropzone</a> kan je zo oproepen.
    </p>
    <p>
      <a href="https://overheid.vlaanderen.be/webuniversum/v3/documentation/forms/vl-ui-upload">Meer
        voorbeelden en documentatie</a>.
    </p>

    <div>
      <h2>Upload</h2>
      <pre>
        <code class="line-numbers language-markup">
            &lt;vl-upload url="http://example.com" id="upload-1"&gt;&lt;/vl-upload&gt;
        </code>
      </pre>
      <div class="demo">
        <vl-upload url="http://example.com" input-name="files" id="upload-1"></vl-upload>
      </div>
    </div>

    <div>
      <h2>Upload bij toevoegen van bestand</h2>
      <pre>
        <code class="line-numbers language-markup">
            &lt;vl-upload url="http://example.com" autoprocess="true"&gt;&lt;/vl-upload&gt;
        </code>
      </pre>
      <div class="demo">
        <vl-upload url="http://example.com" input-name="files" autoprocess="true"></vl-upload>
      </div>
    </div>

    <div>
      <h2>Upload Error</h2>
      <pre>
        <code class="line-numbers language-markup">
            &lt;vl-upload url="http://example.com" error&gt;&lt;/vl-upload&gt;
        </code>
      </pre>
      <div class="demo">
        <vl-upload url="http://example.com" input-name="files" error></vl-upload>
      </div>
    </div>

    <div>
      <h2>Upload Clear</h2>
      <pre>
        <code class="line-numbers language-markup">
            &lt;vl-upload url="http://example.com"&gt;&lt;/vl-upload&gt;

            &lt;button is="vl-button" onclick="clear()"&gt;Clear&lt;/button&gt;

            &lt;script type="text/javascript"&gt;
              function clear() {
                document.querySelector("vl-upload[id=\"upload-4\"]").clear();
              }
            &lt;/script&gt;
        </code>
      </pre>
      <div class="demo">
        <vl-upload id="upload-4" url="http://example.com" input-name="files"></vl-upload>

        <button is="vl-button" onclick="clearList()">Clear</button>

        <script type="text/javascript">
          function clearList() {
            document.querySelector("vl-upload[id=\"upload-4\"]").clear();
          }
        </script>
      </div>
    </div>

    <div>
      <h2>Beperkte Upload (aantal en grootte)</h2>
      Beperkt aantal bestanden opladen, met een bepaalde grootte (20MB).
      <pre>
        <code class="line-numbers language-markup">
            &lt;vl-upload url="http://example.com"
              input-name="files"
              error-message-filesize="De grootte van het bestand mag maximaal :maxFsz zijn."
              error-message-maxfiles="Je kan maximaal :maxfl file(s) uploaden."
              max-files="5" max-size="20000000"&gt;
            &lt;/vl-upload&gt;
        </code>
      </pre>
      <div class="demo">
        <vl-upload url="http://example.com" input-name="files"
                   error-message-filesize="De grootte van het bestand mag maximaal :maxFsz zijn."
                   error-message-maxfiles="Je kan maximaal :maxfl file(s) uploaden." max-files="5"
                   max-size="20000000"></vl-upload>
      </div>
    </div>

    <div>
      <h2>Beperkte Upload zonder dubbels</h2>
      Beperkt aantal bestanden opladen en dubbels zijn niet toegelaten.
      <pre>
        <code class="line-numbers language-markup">
            &lt;vl-upload url="http://example.com"
              input-name="files"
              error-message-filesize="De grootte van het bestand mag maximaal :maxFsz zijn."
              error-message-maxfiles="Je kan maximaal :maxfl file(s) uploaden."
              max-files="2" max-size="20000000" disallow-duplicates="true"&gt;
            &lt;/vl-upload&gt;
        </code>
      </pre>
      <div class="demo">
        <vl-upload url="http://example.com" input-name="files"
                   error-message-filesize="De grootte van het bestand mag maximaal :maxFsz zijn."
                   error-message-maxfiles="Je kan maximaal :maxfl file(s) uploaden." max-files="2"
                   max-size="20000000" disallow-duplicates="true"></vl-upload>
      </div>
    </div>

    <div>
      <h2>Beperkte Upload (aantal en type)</h2>
      Beperkt aantal bestanden opladen, van een bepaald type (mime of extensie).
      <pre>
        <code class="line-numbers language-markup">
            &lt;vl-upload url="http://example.com"
              input-name="files" max-files="10"
              accepted-files="application/pdf, .png"
              error-message-accepted-files="Je kan enkel :fileType bestanden opladen"&gt;
            &lt;/vl-upload&gt;
        </code>
      </pre>
      <div class="demo">
        <vl-upload url="http://example.com" input-name="files" max-files="10" max-size="20000000"
                   accepted-files="application/pdf, .png"
                   error-message-accepted-files="Je kan enkel :fileType bestanden opladen"></vl-upload>
      </div>
    </div>

    <div>
      <h2>Full Body Dropzone Upload</h2>
      Dropzone over heel de pagina
      <pre>
        <code class="line-numbers language-markup">
            &lt;vl-upload url="http://example.com" input-name="files" full-body-drop&gt;&lt;/vl-upload&gt;
        </code>
      </pre>
      <div class="demo">
        <vl-upload url="http://example.com" input-name="files" full-body-drop></vl-upload>
      </div>
    </div>

    <div>
      <h2>Event listener</h2>
      Bij elke <strong>fileChange</strong> van de upload component, wordt de custom event <strong>vl.upload.hook.fileChange</strong>
      getriggered.
      Dit custom event zal triggeren op <strong>drop</strong> en <strong>change</strong>.
      Het event object zal een lijst van alle bestanden bevatten in <strong>e.detail</strong>. Je
      kan die lijst ook vinden in <strong>vl.upload.dropzoneInstances[i].files</strong>,
      waarbij i de index van de dropzone instance is op uw pagina.
      Het event bubbled, dus je kan de event listener op eender welke ancestor van het de upload
      component zetten.
      <strong>vl.upload.dropzoneInstances</strong> bevat alle dropzones op de pagina (indien je niet
      met shadow root werkt).
      <pre>
        <code class="line-numbers language-markup">
          &lt;button is="vl-button" onclick="addListener()"&gt;Voeg listener toe&lt;/button&gt;
          &lt;script&gt;
            function addListener() {
              document.querySelector('vl-upload[id="upload-1"]').on('vl.upload.hook.fileChange',
                  function (event) {
                    console.log(event);
                    console.log(vl.upload.dropzoneInstances[0].files);
                  });
            }
          &lt;/script&gt;
        </code>
      </pre>

      <div class="demo">

        <button is="vl-button" onclick="addListener()">Voeg listener toe</button>
        <script>
          function addListener() {
            document.querySelector('vl-upload[id="upload-1"]').on('vl.upload.hook.fileChange',
                function (event) {
                  console.log(event);
                  console.log(vl.upload.dropzoneInstances[0].files);
                });
          }
        </script>
      </div>
    </div>

  </body>
</html>